<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
   xmlns:th="http://www.thymeleaf.org"
   xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
   layout:decorate="~{layouts/default_layout}">
   
<head>
<!-- csrf ì„¤ì • -->
<meta name="_csrf" th:content="${_csrf.token}"/>
<meta name="_csrf_header" th:content="${_csrf.headerName}"/>
<link rel="stylesheet" href="/css/prtfl/button.css">
<link href="/css/star.css" rel="stylesheet">
<style>
	footer {
		display: none;
	}

	* {
	  box-sizing: border-box;
	}
	
	#check{
		min-height : 2000px;
	}

	#left {
	  float: left;
	  width: 30%;
	  height: 500px; /* only for demonstration, should be removed */
	  padding: 0;
	  position: sticky; 
	  top: 31%;
	}
	
	#detail{
		background-color:white;
		border: 2px solid #DEDADA;
		border-radius: 10px;
		z-index: 2;
	    top: -35%;
	    position: relative; 
	}
	
	/*ëŒ€í‘œì´ë¯¸ì§€*/
	#backImg{
		width: 300vh;
	}
	
	h3{
		font-weight: bold;
		text-align: center;
		margin-top: 0;
	}
	
	h4{
		font-weight: bold;
		margin-top: 0;
	}
	
	article {
	  float: left;
	  padding: 20px;
	  width: 70%;
	  height: 300px; /* only for demonstration, should be removed */
	}
	
	.border {
		border: 1px solid #D8D8D8;
		border-radius: 5px;
		padding: 10px;
		margin-bottom: 3%;
	}
	
	.btnSize {
		width: 250px;
		margin:auto;
        display:block;
        margin-bottom: 3px;
	}
	
	.label {
		color : black;
	}
	
	#btn {
		width: 250px;
		margin:auto;
        display:block;
        margin-bottom: 3px;
	}
	
	.heart {
	  width: 100px;
	  height: 100px;
	  background: url("https://cssanimation.rocks/images/posts/steps/heart.png") no-repeat;
	  background-position: 0 0;
	  cursor: pointer;
	  transition: background-position 1s steps(28);
	  transition-duration: 0s;
	 }
	 
	 .active {
	    transition-duration: 1s;
	    background-position: -2800px 0;
	  }
	  
	  #love{
	  	float: right;
	  }
	  
   <!--ë””ìì¸ ìƒì„¸ë³´ê¸° ëª¨ë‹¬-->
	.modal {
		display: none; /* Hidden by default */
		position: fixed; /* Stay in place */
		z-index: -1; /* Sit on top */
		padding-top: 100px; /* Location of the box */
		left: 0;
		top: 0;
		width: 100%; /* Full width */
		height: 100%; /* Full height */
	 	overflow: auto; /* Enable scroll if needed */ 
		background-color: rgba(0, 0, 0, 0.5); /* Black w/ opacity */
		box-sizing: border-box;
	}
	
	.img_modal_content {
		background-color: #fefefe;
		margin : 70px auto;
		border: 1px solid #888;
		width: 60%;
		height: 90%;
		text-align: left;
		
		/* ì´ë¯¸ì§€ ìŠ¤í¬ë¡¤*/
		max-height: calc(100vh - 210px);
	    overflow-y: auto;
	}
	
	/* ìŠ¤í¬ë¡¤ë°” ì§€ìš°ê¸° */
	.img_modal_content::-webkit-scrollbar {
	    display: none; /* í¬ë¡¬, ì‚¬íŒŒë¦¬, ì˜¤í˜ë¼, ì—£ì§€ */
	}
	
	.close {
		color: black;
		float: right;
		font-size: 40px;
		font-weight: bold;
		text-align: right;
		margin-right: 10px;
		position: sticky;
	  	top: 0;
	}
	
	.close:hover, .close:focus {
		color: #000;
		text-decoration: none;
		cursor: pointer;
	}
	
	#modelBtn {
		text-align: center;
	}
	
	.modelBtn1 {
		display: inline-block;
	}
	
	.modal_content {
		width: 350px;
		min-height: 200px;
		margin: 0 auto;
		padding: 20px;
		background: #fff;
		border: 0.5px solid #666;
		border-radius: 15px;
	}
	
	.modal_layer {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: rgba(0, 0, 0, 0.5);
		z-index: -1;
	}
	
	/* Create three unequal columns that floats next to each other */
	.column {
	  float: left;
	  padding: 10px;
	}
	
	/* Left and right column */
	.column.side {
	  width: 30%;
	  height: 100%;
	  float: right;
	  position: sticky;
	  top: 0;
	  background-color: lightGray;
	  padding:20px;
	  
	}
	
	/* Middle column */
	.column.middle {
	  width: 70%;
	  padding:0;
	  
	}
	
	/* Responsive layout - makes the three columns stack on top of each other instead of next to each other */
	@media screen and (max-width: 600px) {
	  .column.side, .column.middle {
	    width: 100%;
	  }
	}
	
	.box {
	    width: 150px;
	    height: 150px; 
	    border-radius: 100%;
	    overflow: hidden;
	    text-align: center !important;
	    margin:0 auto;
	}
	
	.profile {
	    width: 65%;
	    height: 65%;
	    object-fit: cover;
	    border-radius: 70%;
	    overflow: hidden;
	    margin : 15px auto;
	    z-index: 3;
	    right:-17%;
	    position: relative;  
	}
	
	/*ë””ìì¸ ì •ë ¬*/	
	.imgArray {
	    margin: 5%;
	}
	
	/*í™œë™ë‚´ì—­*/
	.item{
		display: flex;
	    flex-shrink: 0;
	    -webkit-box-flex: 0;
	    flex-grow: 0;
	    -webkit-box-align: center;
	    align-items: center;
	     margin-bottom: 5px;
	}
	
	.item > .item__emoji{
		font-weight: 400;
	    font-size: 18px;
	    line-height: 26px;
	    width: 18px;
	    margin-right: 7px;
		}
	
	.caption1{
		font-size: 15px;
	    letter-spacing: -0.25px;
	    line-height: 17px;
	    font-weight: bold;
	}
	.item .value{
	    margin-left: auto;
	    font-weight: bold;
	}
	
	/*ì„¸ë¶€ ì •ë³´*/
	.detail_tr{
	display: flex;
    justify-content: flex-start;
    width: 100%;
    border-bottom: none;
    padding: 3px 0;
    flex-direction: row;
    align-items: center;
	}
	.detail_th {
    min-width: 100px;
    padding: 0 20px 0 0;
    font-size: 1.06em;
    line-height: 1.5em;
    color: #999;
	}
	.detail_td {
	    font-size: 1.06em;
	    line-height: 1.5em;
	    color: #555;
	}
	
	/*ëŒ“ê¸€*/
	#replyInsertFrm{
		height: 120px;
	}
	
	.replyBtn{
		background-color: transparent;
		border: 0;
		color: rgba(2,126,251,1);
	}
	
	#repInsertBtn, #logRepBtn{
		background-color: transparent;
		border: 1px solid rgba(2,126,251,1);
		color: rgba(2,126,251,1);
		float: right;
		margin-top: 3px;
		width: 60px;
		height: 32px;
		padding: 0;
	}
	
	#replyInsertFrm{
		height: 120px;
	}
	
	.font-alt{
		font-size: 13px;
	}
	
	/*ë””ìì¸*/
	#designborder{
		width: 65%;
	}
	
	.right{
	  	display: flex;
	  	justify-content: flex-end;
	  	padding: 10px 0;
	    z-index: 1 ;
	  }
	
	.right #caregory{
		margin-top: 0;
	}
	
	.col-sm-6{
		margin-top: 10px;
	}
	  
	/*ì²´í¬ë°•ìŠ¤*/
	input[type="checkbox"]{
		z-index: 3;
		width: 30px;
		height: 30px;
		margin-right: 3px;
	}
	
	input[type="checkbox"]:checked {
	   accent-color: #FFDE59;
	}
</style>
</head>

<div layout:fragment="content">
	<img id="backImg" th:src="@{/images/title.png}">
   
   <div class="container">
    <section id="check">
  	<nav id="left">
  	<div id="detail">
  		<!-- ë¹„íšŒì› ì¢‹ì•„ìš”ë²„íŠ¼-->
	  	<th:block sec:authorize="!isAuthenticated()">
	    	<div id="love" class="stage heart" th:classappend="${like} != null ? active" style="position:relative; z-index: 2; right: -20px;" th:onclick="|location.href='@{/loginPage}'|"></div>
		</th:block>
		<!-- íšŒì› ì¢‹ì•„ìš”ë²„íŠ¼-->
		<th:block sec:authorize="isAuthenticated()">
  			<div id="love" class="stage heart" th:classappend="${like} != null ? active"></div>
  		</th:block>
  		<img class="profile" th:src="|/fileView/${dgnerSelect.img}|">
  		
  		<label style="display:none;"class="label" id="userId" th:text="${dgnerSelect.userId}"></label>
  		<h3 id="userName" th:text="|${dgnerSelect.userName}ë‹˜|"></h3>
  		<p style="font-size: 13px; font-weight: bold; text-align: center; margin: 15px 44px;" th:text="${dgnerSelect.oneIntro}"></p>
  		
  		<th:block sec:authorize="isAuthenticated()">
  		<!-- í˜„ì¬ ë¡œê·¸ì¸ëœ idì™€ ì‘ì„±ìidê°€ ë‹¤ë¥¼ ê²½ìš° ë²„íŠ¼ ë‚˜íƒ€ë‚¨ -->
  		<th:block th:if="${session.member.getUserId} != ${dgnerSelect.userId}">
	  		<button style="margin-top: 20px;" type="button" class="find-trigger btn-15 btnSize chattingUp">1:1ëŒ€í™”</button>
	  		<button type="button" class="find-trigger btn-1 btnSize punishModalUp">ì‹ ê³ í•˜ê¸°</button>
  		</th:block>
  		
  		<!-- í˜„ì¬ ë¡œê·¸ì¸ëœ idì™€ ì‘ì„±ìidê°€ ë™ì¼í•  ê²½ìš° ë²„íŠ¼ ë‚˜íƒ€ë‚¨ -->
	    <th:block th:if="${session.member.getUserId} == ${dgnerSelect.userId}">
		   <button style="margin-top: 20px;" type="button" class="find-trigger btn-15 btnSize" th:onclick="|location.href='@{dgnerUpdate(userId=${dgnerSelect.userId})}'|">ê¸€ ìˆ˜ì •í•˜ê¸°</button>
		   <button type="button" class="find-trigger btn-1 btnSize" th:attr="onclick=|deleteCheck('${dgnerSelect.userId}')|">ê¸€ ì‚­ì œí•˜ê¸°</button>
		</th:block>
  		</th:block>
  		
  		<hr>
  		<div style="margin: 15px 44px;">
  			<p style="font-size: 16px; font-weight: bold;">í™œë™ë‚´ì—­</p>
  			<div class="item">
		  		<span class="item__emoji">ğŸ‘“</span>
		  		<div class="caption1">ì¡°íšŒìˆ˜</div> 
		  		<div class="value" th:text="|${dgnerSelect.inq}íšŒ|"></div>
	  		</div>
	  		
	  		<div class="item">
		  		<span class="item__emoji">ğŸ˜</span>
		  		<div class="caption1">ì¢‹ì•„ìš”</div> 
		  		<div class="value" id ="likeCount" th:text="|${dgnerSelect.cnt}ê±´|"></div>
	  		</div>
	  		
	  		<div class="item">
		  		<span class="item__emoji">ğŸ¨</span>
		  		<div class="caption1">ê²½ë ¥</div> 
		  		<div class="value" th:text="|${dgnerSelect.carrYear}ë…„|"></div>
	  		</div>
  		</div>
  	</div>
  </nav>
  
  <article>
    <div role="tabpanel">
                  <ul class="nav nav-tabs font-alt" role="tablist">
                    <li class="active"><a href="#design" data-toggle="tab" aria-expanded="false"><span class="icon-pictures"></span>ë””ìì¸</a></li>
                    <li><a href="#support" data-toggle="tab" aria-expanded="true"><span class="icon-pencil"></span>ì†Œê°œ</a></li>
                    <li><a href="#review" data-toggle="tab" aria-expanded="false"><span class="icon-chat"></span>í›„ê¸°</a></li>
                  </ul>
                  <div class="tab-content">
                    <div class="tab-pane" id="support">
                    	<div class="border">
                    		<div class="detail_tr">
								<p class="detail_th">ì‘ì—…ë¬¼ë¶„ìœ„ê¸°</p> 
								<p class="detail_td" th:text="${dgnerSelect.style}"></p>
							</div>
							<div class="detail_tr">
								<p class="detail_th">ì‘ì—…ê¸°ê°„</p> 
								<p class="detail_td" th:text="${dgnerSelect.workDt}+'ì¼'"></p>
							</div>
							<div class="detail_tr">
								<p class="detail_th">ì‘ì—…ë¹„ìš©</p> 
								<p class="detail_td" th:text="|${#numbers.formatInteger(dgnerSelect.workPrice, 0, 'COMMA')}ì›|"></p>
							</div>
							<div class="detail_tr">
								<p class="detail_th">ìê²©ì¦</p> 
								<p class="detail_td">í¬í† ìƒµ1ê¸‰</p>
							</div>
                    	</div>
                    	
                    	<h4>ê²½ë ¥ì‚¬í•­</h4>
                    	<div class="border">
                    		<p th:utext="${dgnerSelect.career}"></p>
                    	</div>
					       
                    	<h4>ëŒ“ê¸€</h4>
                    	<div class="border">
					        <!-- ëŒ“ê¸€ ì‘ì„± -->
						    <form id="replyInsertFrm">
						    	<th:block sec:authorize="!isAuthenticated()">
						    		<textarea class="form-control" name="replyCntn" id="replyCntn" rows="3" placeholder="ë¡œê·¸ì¸ í›„ ë“±ë¡ ê°€ëŠ¥í•©ë‹ˆë‹¤." readonly="readonly"></textarea>
						    		<button type="button" id="logRepBtn">ëŒ“ê¸€ì¶”ê°€</button>
						    	</th:block>
						    
						    	<th:block sec:authorize="isAuthenticated()">
						    		<textarea class="form-control" name="replyCntn" id="replyCntn" rows="3" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”."></textarea>
						    		<button type="button" id="repInsertBtn">ëŒ“ê¸€ì¶”ê°€</button>
						    	</th:block>
						    </form>
						    
						    <div id=reply>
  							</div>
                    	</div>
                    </div>
                    
                    <!-- í›„ê¸°ì¹´í…Œê³ ë¦¬ -->
                    <div class="tab-pane" id="review">
                    	<div class="tab-pane active" id="reviews">
	                    
	                    <th:block th:if="${recount.reavg} != null">
	                     <div class="starDiv">
	                    	<div id="starAge">
	                    	<h3>ì´ í‰ì </h3>
	                    	<div class="starSize"><span th:each="num: ${#numbers.sequence(1, recount.fullstar)}"><i class="fa fa-star star"></i></span><span th:if="${recount.halfstar > 0}"><i class="fa fa-star-half-full star"></i></span><span th:if="${recount.laststar == 1}"><i class="fa fa-star-o star"></i></span></div>
	                    	<p style="font-size: 16px; font-weight: bold;" th:text="|${recount.reavg} / 5|"><p>
	                    	</div>
	                    	
	                    	<div id="starCount">
	                    	<h3>ì „ì²´ í›„ê¸°ìˆ˜</h3>
	                    	<i class="starSize">ğŸ“</i>
	                    	<p style="font-size: 16px; font-weight: bold;" th:text="|${recount.recount}ê°œ|"><p>
	                    	</div>
	                     </div>
	                     
	                   <!-- ì •ë ¬ìˆœ -->
	                   <div class="right">
					   <select id="order" name="order">
							<option value="writing_dt" selected>ì‘ì„±ì¼ìˆœ</option>
							<option value="star">ë³„ì ë†’ì€ìˆœ</option>
							<option value="minStar">ë³„ì ë‚®ì€ìˆœ</option>
						</select>
						</div>
	                    
                    	<div id="newStar">
                    	<div class="starList" th:each="re : ${reviews}">
		                    <div class="comments reviews">
		                      <div class="comment clearfix">
		                      <div class="comment-avatar"><img src="/images/replyImg.png" alt="avatar"></div>
		                        <div class="comment-content clearfix">
		                          <div class="comment-author font-alt">
		                          <!--ë³„ì ì²˜ë¦¬-->
		                          		<span th:each="num: ${#numbers.sequence(1, re.fullstar)}"><i class="fa fa-star star"></i></span><span th:if="${re.halfstar > 0}"><i class="fa fa-star-half-full star"></i></span><span th:each="num: ${#numbers.sequence(1, re.laststar)}" th:if="${re.laststar >= 1}"><i class="fa fa-star-o star"></i></span>
		                          </div>
		                          <div class="comment-body">
		                            <p th:text="${re.reviewCntn}"></p>
		                          </div>
		                          <div class="comment-meta font-alt">
		                          	<span th:text="${re.userId}"></span> - <span th:text="${#dates.format(re.writingDt, 'yyyy/MM/dd')}"></span>
		                          </div>
		                        </div>
		                      </div>
	                    	</div>
	                    </div>
	                    </div>
	                    </th:block>
	                    
	                    <th:block th:if="${recount.reavg} == null">
	                    	<div class="border">
	                    		<h3>í›„ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤.</h3>
	                    	</div>
	                    </th:block>
	                  	</div>
                    </div>
                    
                    <!-- ë””ìì¸ -->
                    <div class="tab-pane active" id="design">
                    	<th:block sec:authorize="isAuthenticated()">
                    		<button th:if="${session.member.userId} == ${dgnerSelect.userId}" type="button" class="find-trigger btn-1" style="height: 30px; padding: 5px; margin:5px; font-size: 13px;" th:onclick="|location.href='@{/design/myDesignList(userId=${dgnerSelect.userId})}'|">ë””ìì¸ì¶”ê°€</button>
                    	</th:block>

                    	<div class="border" id="designBox">
                    		<div class="right">
							<th:block th:if="${dgnerPrtflVO.winYn} == null">
								<input type="checkbox" name="winYn" id="winYn" value=''>
							</th:block>
							<th:block th:if="${dgnerPrtflVO.winYn} != null">
								<input type="checkbox" name="winYn" id="winYn" th:value="Y" checked="checked">
							</th:block>
							
							<label for="winYn" style="margin-top:5px; height: 20px; z-index: 3; font-size: 18px; margin-right: 20px;">ìš°ìŠ¹ì‘í’ˆ</label>
						
							<select name="caregory" id="caregory">
								<option value="D4" selected="selected">í¬ìŠ¤í„°</option>
								<option value="D1" >í˜„ìˆ˜ë§‰</option>
								<option value="D2">ë°°ë„ˆ</option>
								<option value="D3">ë¡œê³ </option>
								<option value="D5">ê¸°íƒ€</option>
					        </select>
                    		</div>
                    		
                    		<div class="container">
                    		<div id="designborder">
					        </div>
					        </div>
					        
				             <!-- //í˜ì´ì§• ê²½ë¡œ :: ë¬¸ì -->
							<div class="row mt-5" id="paging">
								<div class="col text-center">
									<div class="block-27" id="returnPaging">
									</div>
								</div>
							</div>
					     </div>
                    </div>
                  </div>
                </div>
  </article>
</section>
</div>
	
	<!-- ì‹ ê³  í¼ -->
	<div id="punishFrm" class="modal">
			<div class="modal_content">
				<h2>ì‹ ê³ </h2>
				<div id="box">
					<label>ì‹ ê³ ëŒ€ìƒì</label>
					<input type="text" id="targetId" name="targetId" th:value="${dgnerSelect.userId}" readonly><br>
					<label>ì‹ ê³ ì</label>
					<th:block sec:authorize="isAuthenticated()">
						<input type="text" id="userId" name="userId" th:value="${session.member.userId}"><br>
					</th:block>
					<label>ì‹ ê³ ì‚¬ìœ </label>
					<textarea rows="5" cols="30" id="banCntn" name="banCntn" placeholder="ì‹ ê³ ì‚¬ìœ ì— ëŒ€í•´ ì‘ì„±í•´ì£¼ì„¸ìš”."></textarea>
					<button type="button" class="cancel">ì·¨ì†Œ</button>
					<button type="button" id="punish">ì‹ ê³ </button>
				</div>
			</div>
		<div class="modal_layer"></div>
	</div>
    
	<!-- ë””ìì¸ ìƒì„¸ë³´ê¸° ëª¨ë‹¬ -->
	<div id="dseignModel" class="modal">
		<div class="img_modal_content">
			
			<div class="column middle">
				<h4 id="category">ë¶„ë¥˜</h4>
				<h2 id="ttl">ì œëª©</h2>
				<div id="modelSelect"></div>
			</div>
			  
			<div class="column side">
			  	<span class="close">&times;</span>
			   <div id="dgnerSelect"></div>
			</div>
			
		</div>
		<div class="modal_layer"></div>
	</div>
	
   <script>
   		//csrf ì„¤ì •
   		var token = $("meta[name='_csrf']").attr("content");
		var header = $("meta[name='_csrf_header']").attr("content");
		desginList();
		
		//í•˜íŠ¸ ì´ë²¤íŠ¸
		//í•˜íŠ¸ë¥¼ í´ë¦­í–ˆì„ ê²½ìš° ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸
		$(".heart").on("click", function () {
			//active í´ë˜ìŠ¤ê°€ ì—†ì„ ê²½ìš° ìƒì„±, ìˆì„ ê²½ìš° ì‚­ì œ
			$(this).toggleClass("active");
			//í•˜íŠ¸ ê¸°ì¤€ìœ¼ë¡œ ë¦¬ìŠ¤íŠ¸ ì •ë ¬ í•¨ìˆ˜
			//range();
		});
		
		//í•´ë‹¹ í¬íŠ¸í´ë¦¬ì˜¤ ì‘ì„±ìì— ëŒ€í•œ ëŒ“ê¸€ì„ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ replyTagì— ì‘ì„±ìIDë¥¼ êµ¬í•´ì¤€ë‹¤.
   		let replyTgt = '[[${dgnerSelect.userId}]]';

   		//ëŒ“ê¸€, ëŒ€ëŒ“ê¸€ ë¶ˆëŸ¬ì˜¤ëŠ” ajax
   		$.ajax({
   			url : '/replyList',
   			method : 'post',
   			data : JSON.stringify({replyTgt:replyTgt, boardCat:'T07'}),
   			contentType : "application/json",
   			beforeSend : function(xhr)
            {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
				xhr.setRequestHeader(header, token);
            }
   		}).then(res => {
   			for(reply of res){
   				//ëŒ“ê¸€ì¼ ê²½ìš°
   				if(reply.rerepTgt == null){
   					$("#reply").append(make(reply));
   				} else { //ëŒ€ëŒ“ê¸€ì¼ ê²½ìš°, ëŒ€ëŒ“ê¸€ì˜ ê²½ìš° rerepTgtì»¬ëŸ¼ì— ëŒ€ëŒ“ê¸€ì„ ë‹¨ ëŒ“ê¸€ ë²ˆí˜¸ê°€ ì í˜€ìˆë‹¤.
   					//ëŒ€ëŒ“ê¸€ì€ ì—°ê´€ìˆëŠ” ëŒ“ê¸€ ë°”ë¡œ ë°‘ì— ë“¤ì–´ê°€ì•¼ë˜ê¸° ë•Œë¬¸ì— ëŒ“ê¸€ ìƒì„±ì‹œ idë¥¼ ë¶€ì—¬í•˜ì—¬ rerepTgtì´ ëŒ“ê¸€IDì™€ ê°™ì€ ë²ˆí˜¸ê°€ ì íŒ ëŒ“ê¸€ ë°‘ìœ¼ë¡œ appendí•œë‹¤.
   					$("#" + reply.rerepTgt).append(makeRe(reply));
   				}
   			}
   		})
   		
   		//ëŒ“ê¸€ trìƒì„±
   		function make(reply){
   			let replyBtn = '';
   			let delBtn = '';
			let upBtn = '';
			let userId = '[[${session.member != null ? session.member.userId :""}]]';
			let dgner = '[[${dgnerSelect.userId}]]'
			
			if(dgner == userId){
				replyBtn = `<button class="reply replyBtn">Reply</button>`;
			}
			
			//ëŒ“ê¸€ ì‘ì„±ìì¼ ê²½ìš°ì—ë§Œ ì‚­ì œ ë²„íŠ¼ ìƒì„±
			if(reply.userId == userId){
				delBtn = `<button class='repDelete replyBtn'>ì‚­ì œ</button>`;
				upBtn = `<button class='repUpdate replyBtn'>ìˆ˜ì •</button>`;
			}
			
   			let p = `
   				<div class="comment clearfix">
                <div class="comment-avatar"><img src="/images/replyImg.png" alt="avatar"></div>
                <div id="${reply.replyNo}">
                <div class="comment-content clearfix">
                  <div class="comment-author font-alt">${reply.userId}</div>
                  <div class="comment-body">
                    <p style="font-size: 16px; font-weight: bold;">${reply.replyCntn}</p>
                  </div>
                  <div class="comment-meta font-alt">${reply.writingDt} ${replyBtn}${delBtn}${upBtn}
                  </div>
                </div>
                </div>
				</div>
				</div>
                `
   			return p;
   		}
   		
   		//ëŒ€ëŒ“ê¸€ trìƒì„±
   		function makeRe(reply){
   			let delBtn = '';
			let upBtn = '';
			let userId = '[[${session.member != null ? session.member.userId :""}]]';
			
			//ëŒ“ê¸€ ì‘ì„±ìì¼ ê²½ìš°ì—ë§Œ ì‚­ì œ ë²„íŠ¼ ìƒì„±
			if(reply.userId ==userId){
				delBtn = `<button class='repDelete replyBtn'>ì‚­ì œ</button>`;
				upBtn = `<button class='repUpdate replyBtn'>ìˆ˜ì •</button>`;
			}
   			
   			//í•œ ëŒ“ê¸€ë‹¹ ëŒ€ëŒ“ê¸€ì€ í•œê°œë§Œ ë‹¬ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ëŒ“ê¸€ì— ìˆëŠ” reply ë²„íŠ¼ ì‚­ì œ
   			$("#" + reply.rerepTgt).children().children().children('button:eq(0)').remove();
   			
   			let p = `<div class="comment clearfix">
                <div class="comment-avatar"><img src="/images/replyImg.png" alt="avatar"></div>
                <div id="${reply.replyNo}">
                <div class="comment-content clearfix">
                  <div class="comment-author font-alt">${reply.userId}</div>
                  <div class="comment-body">
                    <p style="font-size: 16px; font-weight: bold;">${reply.replyCntn}</p>
                  </div>
                  <div class="comment-meta font-alt" id="${reply.replyNo}">${reply.writingDt} ${delBtn}${upBtn}
                  </div>
                </div>
                </div>
              </div>`
            
            return p;
   		}
   		
   	//ëŒ“ê¸€ ì¶”ê°€
		$("#repInsertBtn").on("click", function() {
			//textareaì— ìˆëŠ” ê°’ ë“¤ê³  ì˜¤ê¸°
			let replyCntn = $('#replyCntn').val();
			let userId = '[[${session.member != null ? session.member.userId :""}]]';
			
			$.ajax({
	   			url : '/replyInsert',
	   			method : 'post',
	   			data : JSON.stringify({userId:userId, replyTgt:replyTgt, replyCntn:replyCntn, boardCat:'T07'}),
	   			contentType : "application/json",
	   			beforeSend : function(xhr)
	            {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
					xhr.setRequestHeader(header, token);
	            }
	   		}).then(res => {
	   			//ëŒ“ê¸€ ë¶€ë¶„ì— ë“±ë¡í•˜ê¸°
	   			$("#reply").append(make(res));
	   			$('#replyCntn').val('');
	   		})
		});
		
		//replyë²„íŠ¼ì„ í´ë¦­í–ˆì„ ê²½ìš° ëŒ€ëŒ“ê¸€ ì…ë ¥ í¼ ìƒì„±
		$(document).on('click', '.reply', function(e){
		    e.preventDefault();
		    //ëŒ€ëŒ“ê¸€ì„ ì‘ì„±í•  replyNo êµ¬í•˜ê¸°
		    let rerepTgt = $(this).parent().parent().parent("div").attr('id');
		    //ëŒ€ëŒ“ê¸€ ì…ë ¥í•  ìˆ˜ ìˆëŠ” í¼ ìƒì„±
		  	$(this).parent("div").append(makeFrm(rerepTgt));
		  	
		  	//replyë²„íŠ¼ ìˆ¨ê¹€
		  	$(this).hide();
		})
		
		//ëŒ€ëŒ“ê¸€ ì…ë ¥ í¼
		function makeFrm(rerepTgt) {
			let form = `<form>
				<input type="hidden" id="rerepTgt" name="rerepTgt" value="${rerepTgt}">
	            <textarea class="form-control" id="reReplyCntn" name="replyCntn" rows="3"></textarea>
	            <button type="button" id="rerepTgt" class="reply">ë‹µë³€</button>
	        </form>`
		    
		    return form;
		}
		
		//ëŒ€ëŒ“ê¸€ ì¶”ê°€
		$(document).on('click', '#rerepTgt', function(e){
			let replyCntn = $('#reReplyCntn').val();
			let rerepTgt = $('#rerepTgt').val();
			let userId = '[[${session.member != null ? session.member.userId :""}]]';
			
			$(this).parent("form").remove();
			$.ajax({
	   			url : '/replyInsert',
	   			method : 'post',
	   			data : JSON.stringify({userId:userId, replyTgt:replyTgt, replyCntn:replyCntn, boardCat:'T07', rerepTgt:rerepTgt}),
	   			contentType : "application/json",
	   			beforeSend : function(xhr)
	            {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
					xhr.setRequestHeader(header, token);
	            }
	   		}).then(res => {
	   			
	   			$("#" + res.rerepTgt).append(makeRe(res));
	   		})
		})
		
		//ëŒ“ê¸€ ì‚­ì œ
		$(document).on('click', '.repDelete', function(e){
			let btn=$(this);
			let replyNo = $(this).parent().parent().parent("div").attr('id');
			$.ajax({
				url : '/replyDelete',
				type : 'POST',
				data : {
					replyNo : replyNo
				},
				beforeSend: function (xhr) {
					/*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
					xhr.setRequestHeader(header, token); //403ì˜¤ë¥˜, type postì¼ë•Œ ë„£ê¸°
				},
				success : function(result){
					if(result ==1){
					btn.closest(".comment").remove();
				}
			}
		});		
	});
		
		//ëŒ“ê¸€ ìˆ˜ì • í¼ìœ¼ë¡œ ë³€ê²½
		$(document).on('click', '.repUpdate', function(e){
			let replyNo = $(this).parent().parent().parent("div").attr('id');
			let p = $(this).parent().parent("div").children("div:eq(1)").children("p").text()		
			$(this).parent().parent("div").children("div:eq(1)").children("p").replaceWith("<div><input type='hidden' id='replyNo' name='replyNo' value='" + replyNo +"'></input> <input type='text' id='upReplyCntn' name='upReplyCntn' value='" + p + "'></input>");
			
			$(this).toggleClass("updateBtn");
		});
		
		//ëŒ“ê¸€ ìˆ˜ì •
		$(document).on('click', '.updateBtn', function(e){
			$(this).toggleClass("updateBtn");
			let btn = $(this);
			let replyCntn = $('#upReplyCntn').val();
			let replyNo = $('#replyNo').val();
			let updateBtn = `<button class='repUpdate'>ìˆ˜ì •</button>`;
			
			$.ajax({
				url : '/replyUpdate',
				type : 'POST',
				data : JSON.stringify({replyNo : replyNo, replyCntn : replyCntn}),
				contentType : "application/json",
				beforeSend: function (xhr) {
					/*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
					xhr.setRequestHeader(header, token); //403ì˜¤ë¥˜, type postì¼ë•Œ ë„£ê¸°
				},
				success : function(result){
					btn.parent().parent("div").children("div:eq(1)").replaceWith("<p>" + result.replyCntn + "</p>");
				}		
			})
		});
		
		//ë””ìì¸ ì¢…ë¥˜ë³„
		$('#caregory').change(function(){
			desginList();
		})
		
		$('#winYn').on('click', function() {
			if($("input[name=winYn]").val() == ''){
				$("input[name=winYn]").val('Y');
				desginList();
			} else {
				$("input[name=winYn]").val('');
				desginList();
			}
		})
		
		//ë””ìì¸ ì „ì²´ ë¦¬ìŠ¤íŠ¸
		function desginList() {
			let userId = '[[${dgnerSelect.userId}]]'
			let loginId = '[[${session.member != null ? session.member.userId :""}]]';
			let caregory = $("#caregory option:selected").val();
			let winYn = $("input[name=winYn]").val();
			
			$.ajax({
				url: '/prtfl/desginList',
				method: 'post',
				data: {
					userId:userId, loginId:loginId, caregory:caregory, winYn:winYn
				},
				beforeSend: function (xhr) {
					xhr.setRequestHeader(header, token);
				},
			}).then(res => {
				$('#designborder').empty();
				for(design of res.designs){
					$('#designborder').append(makeDesgin(design));
				}
				$('#returnPaging').empty();
				$('#returnPaging').append(makePageing(res.paging));
			})
		};
		
		//ë””ìì¸ ë¦¬ìŠ¤íŠ¸
		function makeDesgin(design){
			//ë¡œê·¸ì¸ íšŒì›ì˜ í•˜íŠ¸ëˆŒë ¤ì§„ê²ƒë§Œ ì²´í¬
			let active = null;
			let tag = '';
			if(design.mylike > 0){
				active = 'active';
			}
			
			if(design.caregory == 'í˜„ìˆ˜ë§‰'){
				tag = `<div class="col-sm-6 col-md-4 col-lg-4" style="width: 93%; margin-left: 10px; "> 
					<div class="shop-item">
					<div class="shop-item-image"> <img src="/fileView/${design.centerImg}" style="width: 1200px; height: 200px; padding: 0;"  class="img-fluid">
					  <div class="shop-item-detail">
					  <div class="stage">
						<div id="${design.dgnNo}" class="stage heart ${active} desgin"></div>
	 					</div>
		              	<a href="#" class="btn btn-round btn-b">
		              	<span id="${design.dgnNo}" class="icon-magnifying-glass">ìƒì„¸ì¡°íšŒ</span></a>
								</div>
							</div>
							<p>${design.name}</p>
							</div>
						</div>`;
			} else if(design.caregory == 'ë°°ë„ˆ'){
				tag = `<div class="col-sm-6 col-md-4 col-lg-4" style="width: 32%; height: 650px; margin-right:5px;"> 
					<div class="shop-item">
					<div class="shop-item-image"> <img src="/fileView/${design.centerImg}" style="width: 100%; height: 550px;">
					  <div class="shop-item-detail">
					  <div class="stage">
						<div id="${design.dgnNo}" class="stage heart ${active} desgin"></div>
	 					</div>
		              	<a href="#" class="btn btn-round btn-b">
		              	<span id="${design.dgnNo}" class="icon-magnifying-glass">ìƒì„¸ì¡°íšŒ</span></a>
								</div>
							</div>
							<p>${design.name}</p>
							</div>
						</div>`;
			}  else {
				tag = `<div class="col-sm-6 col-md-4 col-lg-4" style="width: 33%; padding-left: 0;"> 
					<div class="shop-item">
					<div class="shop-item-image"> <img src="/fileView/${design.centerImg}" style="width: 250px; height: 250px; border-radius: 3%;" class="img-fluid">
					  <div class="shop-item-detail">
					  <div class="stage">
						<div id="${design.dgnNo}" class="stage heart ${active} desgin"></div>
	 					</div>
		              	<a href="#" class="btn btn-round btn-b">
		              	<span id="${design.dgnNo}" class="icon-magnifying-glass">ìƒì„¸ì¡°íšŒ</span></a>
								</div>
							</div>
							<p>${design.name}</p>
							</div>
						</div>`;
			}
			 return tag;
		}
	
		// í˜ì´ì§• ë§Œë“¤ê¸°
		function makePageing(page) {
			if (page.totalRecord == 0) {
				return;
			}
			
			let pagination = $("<div/>")
			let ul = $("<ul/>").attr("class","pagination");
			if (page.startPage > 1) {
				$(ul).append($("<li/>").html("&laquo;")
										.css("font-size", "30px")
										.attr("class","page-item")
										.on("click", function () {
												gopage(page.startPage - page.pageSize)
										}));
			}
			
			//í˜ì´ì§€ ë²„íŠ¼ ìƒì„±.
			for (let i = page.startPage; i <= page.endPage; i++) {
				if (page.page == i) {
					$(ul).append($("<li/>") .text(i).css("font-size", "20px")
											.css("padding", "10px")
											.css("border-radius", " 10% / 50% ")
											.css("background", "#dce3fd")
											.attr("class", "page-link active")
					);
				} else {
					$(ul).append($("<li/>").text(i).css("font-size", "20px")
											.css("padding", "10px")
											.attr("class", "page-link")
											.on("click", function () {
												gopage($(this).text());
											})); //í˜ì´ì§€ì´ë™ í•¨ìˆ˜
				}
			}
			if (page.endPage < page.lastPage) {
				$(ul).append($("<li/>").html("&raquo;")
										.css("font-size", "30px")
										.attr("class","page-item")
										.on("click", function () {
												gopage(page.startPage + page.pageSize)
										}));
			}
			pagination.append(ul);
			return pagination;
		}
		
		function gopage(i) {
			let userId = '[[${dgnerSelect.userId}]]'
			let page = i;
			let caregory = $("#caregory option:selected").val();
			let winYn = $("input[name=winYn]").val();
			$.ajax({
				url: '/prtfl/desginList',
				method: 'post',
				data: {
					userId:userId, page:page, caregory:caregory, winYn:winYn
				},
				beforeSend: function (xhr) {
					xhr.setRequestHeader(header, token);
				},
			}).then(res => {
				$('#designborder').empty();
				for(design of res.designs){
					$('#designborder').append(makeDesgin(design));
				}
				
				$('#returnPaging').empty();
				$('#returnPaging').append(makePageing(res.paging));
			})
		}
		
		//ë””ìì´ë„ˆ ì¢‹ì•„ìš” ì²˜ë¦¬
		$("#detail #love").on("click", function() {
			 console.log('í´ë¦­')
			 $(this).toggleClass("active");
			 let userId = '[[${session.member != null ? session.member.userId :""}]]';
			 let targetNo = '[[${dgnerSelect.userId}]]';
			 let category = 'T07';
			 
			 //ì¢‹ì•„ìš”ë¥¼ ì¶”ê°€í–ˆì„ ê²½ìš°
		     if(!$(this).hasClass("active")){
		    	 $(this).addClass("active");
		    	 //ì´ ì¢‹ì•„ìš”ìˆ˜ ì²˜ë¦¬
		    	 let likeCount = $('#likeCount').text();
		    	 let likePlus = parseInt(likeCount) + 1
		    	 $('#likeCount').text(likePlus + 'ê±´');
		    	 
		    	 //postë°©ì‹ìœ¼ë¡œ ì¢‹ì•„ìš” ë“±ë¡í•˜ê¸°
		    	 $.ajax({
						url : "/likes/lInsert",
						method : 'post',
						contentType : 'application/x-www-form-urlencoded',
						data : {userId:userId, targetNo:targetNo, category:category},
						beforeSend : function(xhr)
		                {  
		    				xhr.setRequestHeader(header, token);
		                },
						success : function(data) {
						},
						fail : function(result) {
							alert('í•„ìˆ˜í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”')
						}
					})
		     } else if ($(this).hasClass("active")){ //ì¢‹ì•„ìš”ë¥¼ ì·¨ì†Œí–ˆì„ ê²½ìš°
		    	 $(this).removeClass("active");
		    	 //ì´ ì¢‹ì•„ìš”ìˆ˜ ì²˜ë¦¬
		    	 let likeCount = $('#likeCount').text();
		    	 let likeMin = parseInt(likeCount) - 1
		    	 $('#likeCount').text(likeMin + 'ê±´');
		    	 
		    	//postë°©ì‹ìœ¼ë¡œ ì¢‹ì•„ìš” ì·¨ì†Œí•˜ê¸°
		    	 $.ajax({
						url : "/likes/lDelete",
						method : 'post',
						contentType : 'application/x-www-form-urlencoded',
						data : {userId:userId, targetNo:targetNo, category:category},
						beforeSend : function(xhr)
		                {
		    				xhr.setRequestHeader(header, token);
		                },
						success : function(data) {
							//alert('ì¢‹ì•„ìš” ì·¨ì†Œ ì™„ë£Œ');
						},
						fail : function(result) {
							alert('í•„ìˆ˜í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”')
						}
					})
		     }
	 })
	   	
		//ë””ìì¸ë³„ ì¢‹ì•„ìš” ì²˜ë¦¬
		 $(document).on('click', '.desgin', function(e){
			 $(this).toggleClass("active");
			 let userId = '[[${session.member != null ? session.member.userId :""}]]';
			 let targetNo = $(this).attr('id');
			 let category = 'T09';
			 
			  //ì¢‹ì•„ìš”ë¥¼ ì¶”ê°€í–ˆì„ ê²½ìš°
		     if($(this).hasClass("active")){
		    	 //postë°©ì‹ìœ¼ë¡œ ì¢‹ì•„ìš” ë“±ë¡í•˜ê¸°
		    	 $.ajax({
						url : "/likes/lInsert",
						method : 'post',
						contentType : 'application/x-www-form-urlencoded',
						data : {userId:userId, targetNo:targetNo, category:category},
						beforeSend : function(xhr)
		                {  
		    				xhr.setRequestHeader(header, token);
		                },
						success : function(data) {
						},
						fail : function(result) {
							alert('í•„ìˆ˜í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”')
						}
					})
		     } else if (!$(this).hasClass("active")){ //ì¢‹ì•„ìš”ë¥¼ ì·¨ì†Œí–ˆì„ ê²½ìš°	 
		    	//postë°©ì‹ìœ¼ë¡œ ì¢‹ì•„ìš” ì·¨ì†Œí•˜ê¸°
		    	 $.ajax({
						url : "/likes/lDelete",
						method : 'post',
						contentType : 'application/x-www-form-urlencoded',
						data : {userId:userId, targetNo:targetNo, category:category},
						beforeSend : function(xhr)
		                {
		    				xhr.setRequestHeader(header, token);
		                },
						success : function(data) {
							//alert('ì¢‹ì•„ìš” ì·¨ì†Œ ì™„ë£Œ');
						},
						fail : function(result) {
							alert('í•„ìˆ˜í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”')
						}
					})
		     }
		 }) 
		 
		   //ì‹ ê³ ë¶€ë¶„
		   //ì‹ ê³  ëª¨ë‹¬ì°½ ë„ìš°ê¸°
		   $('.punishModalUp').on('click', function() {
			   console.log('í´ë¦­');
			   $("#punishFrm").show();
		   })
		   
		   //ëª¨ë‹¬ì°½ì—ì„œ ì·¨ì†Œë¥¼ ëˆŒë €ì„ ê²½ìš°
		   $(".cancel").on('click', function() {
				$(".modal").hide();
			});
		   
		   //ëª¨ë‹¬ì°½ì—ì„œ ì‹ ê³ ë¥¼ ëˆŒë €ì„ ê²½ìš°
		   $("#punish").on('click', function() {
			   let targetId = '[[${dgnerSelect.userId}]]';
			   let targetCat = 'T07';
			   let banCntn = $("#banCntn").val();
			   let userId = '[[${session.member != null ? session.member.userId :""}]]';
			   let banType = 'P2';
			    $.ajax({
						url : "/punishInsert",
						method : 'post',
						contentType : 'application/x-www-form-urlencoded',
						data : {userId:userId, targetId:targetId, banType:banType, banCntn:banCntn, targetCat:targetCat},
						beforeSend : function(xhr)
		                {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
		    				xhr.setRequestHeader(header, token);
		                },
						success : function(data) {
							alert('ì‹ ê³ ë˜ì—ˆìŠµë‹ˆë‹¤.');
							$("#punishFrm").hide();
						},
						fail : function(result) {
							console.log(result)
						}
					})
		   })
		   
		   //ì±„íŒ…ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ
			$(".chattingUp").on("click", function () {
				$(".chat").toggleClass("active");
				let toId = '[[${dgnerSelect.userId}]]';

				//ì±„íŒ…ë°© êµ¬ë… ìƒì„±
				function createChatRoom() {
					console.log("1 ì±„íŒ…ë°© ìƒì„±");
					let chatroomDataList = new Array();
					let chatroomData1 = {
							toId : toId,
							fromId : fromId
					};
					chatroomDataList.push(chatroomData1);
					let chatroomData2 = {
							toId : fromId,
							fromId : toId
					};
					chatroomDataList.push(chatroomData2);
					
					console.log(JSON.stringify(chatroomDataList));
					
					$.ajax({
			   			url : '/chatInsert',
			   			method : 'post',
			   			data : JSON.stringify(chatroomDataList),
			   			contentType : "application/json; charset=UTF-8",
			   			beforeSend : function(xhr)
			            {  
							xhr.setRequestHeader(header, token);
			            }
			   		}).then(res => {
			   			cId = res;
			   			chattingList(cId)
			   		})
				}
			   	
			   	function chattingList(cId){
			   		console.log('chattingList:', cId);
			   		$.ajax({
						url : '/chatSelect',
						method : 'post',
			   			data : JSON.stringify({toId:toId, fromId:fromId}),
			   			contentType : "application/json; charset=UTF-8",
			   			beforeSend : function(xhr)
			            {   
							xhr.setRequestHeader(header, token);
			            }
			   		}).then(res => {
			   			$(".chat-list").empty();
			   			for(r of res){
			   				$(".chat-list").append(makeList(r));
			   			}
			   			message(cId);
			   		})
			   		
			   		$(".chat-popup").show();
			   	}
		
				function makeList(r){
					let list = `<a onclick="message('${r.cid}')" class="d-flex align-items-center">
									<div class="flex-grow-1 ms-3">
										<h3>ğŸ””${r.toId}</h3>
									</div>
								 </a>`;
					return list;
				}
					
				//ì±„íŒ…í™”ë©´ì´ ë‚˜íƒ€ë‚œë‹¤.
				if ($(".chat").hasClass("active")) {
					$.ajax({
						url : '/checkChat',
						method : 'post',
			   			data : JSON.stringify({toId:toId, fromId:fromId}),
			   			contentType : "application/json; charset=UTF-8",
			   			beforeSend : function(xhr)
			            {   
							xhr.setRequestHeader(header, token);
			            }
			   		}).then(res => {
			   			if(res != ''){
			   				console.log('res.cId:', res.cid);
			   				chattingList(res.cid);
			   			} else {
			   				createChatRoom();
			   			}
			   		})
					$(".chat-popup").show();
					$(".chatbox").show();
				}
		
				//ì±„íŒ…í™”ë©´ì´ ì‚¬ë¼ì§„ë‹¤.
				if (!$(".chat").hasClass("active")) {
					$(".chat-popup").hide();
					$(".chatbox").hide();
				}
			});
		   
			// Get the modal
			var designModel = document.getElementById("dseignModel");
			
			
			$('.close').on("click", function(){
				designModel.style.display = "none";
			})
		   
		   //ë””ìì¸ìƒì„¸ì¡°íšŒ
		   $('#designBox').on("click", "span" ,function(e){
			    let dNo = e.target.id
				designModel.style.display = "block";
				
				$.ajax({
					url: '/design/ajaxSelect',
					method: 'post',
					data: {dgnNo:dNo},
					beforeSend: function (xhr) {
						xhr.setRequestHeader(header, token);
					},
				}).then(res => {
// 					let title = res.name;
// 					let category = res.caregory;
// 					$('#designModel').empty();
// 					$('#dgnerSelect').empty();
					
// 					$('#ttl').text(title);
// 					$('#category').text(res.caregory);
					
// 					$('#modelSelect').empty();
// 					//ëª¨ë‹¬ë‚´ìš©ì„ ì§€ìš´ë’¤ ë¶™ì—¬ë„£ê¸°.
// 					for(file of res.files){
// 						$('#modelSelect').append(makeDesignModel(file.sevNm,title,dNo, category));
// 					}

					$('#dgnerSelect').empty();
					
					let user = res.userId;
					let title = res.name;
					let cntn = '';
					let contest='';
					let category = res.caregory;
					$('#designModel').empty();
					$('#dgnerSelect').empty();
					
					$('#ttl').text(title);
					$('#category').text(res.caregory);
					
					
					if(res.cNo != null){
						contest = `<a href="/contest/select?cNo=${res.cNo}">
							<button type="button">ì‘ì‹œê³µëª¨ì „ ë³´ê¸°</button>
							</a>`
					}
					
					if(res.cntn != null){
						cntn = `<p><small>${res.cntn}</small></p>
									<hr>`
					}
					
					
					let content = ` 
									<h5><small>DESING BY</small> ${user}</h5>
									<h5><smll>ìš°ìŠ¹íšŸìˆ˜ ${res.cnt}íšŒ</small></h5>
									
									<hr>
									${cntn}
									${contest}
								  `
					
					$('#dgnerSelect').append(content);
					
					$('#modelSelect').empty();
					//ëª¨ë‹¬ë‚´ìš©ì„ ì§€ìš´ë’¤ ë¶™ì—¬ë„£ê¸°.
					for(file of res.files){
						$('#modelSelect').append(makeDesignModel(file.sevNm,title,dNo,category));
					}
				})
			}) 
			
			//ëª¨ë‹¬ì°½ :ë””ìì¸ ìƒì„¸ ì´ë¯¸ì§€.
			function makeDesignModel(fileName,title,dNo,category){
				let design='';
				if(category =='í˜„ìˆ˜ë§‰'){
					design = `<div class="design " id="${dNo}" style="width:100%; margin-bottom:20px;">
						   <img src="/fileView/${fileName}" style="style=width: 100%; height: 200px;">
					  </div>`
				} else if(category =='ë°°ë„ˆ'){
					design = `<div class="design" id="${dNo}" style="width:60%; margin: 10px auto; margin-bottom:20px;">
								<img src="/fileView/${fileName}" style="width: 100%; height: 60%;">
						  	  </div>`
				} else {
					design = `<div class="design" id="${dNo}" style="float: left ">
								<img src="/fileView/${fileName}" style="width: 1000px; height: 900px">
							  </div>`
				}
				
				return design;
			}
			
			$('.close').on("click", function(){
				$("#designModel").hide();
			})
			
			//í¬íŠ¸í´ë¦¬ì˜¤ ì‚­ì œ
			function deleteCheck(userId) {
			   if(!confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')){
				   return false;
			   } else {
				   location.href='/prtfl/dgnerDelete?userId='+userId;
			   }
		     }
			

	   //ë³„ì  ì •ë ¬
	   $('#order').change(function() {
		   let order = $("#order option:selected").val();
		   let reviewTgt = '[[${dgnerSelect.userId}]]';
		   let category = 'T07';
		   $.ajax({
				url : "/review/List",
				method : 'post',
				contentType : 'application/x-www-form-urlencoded',
				data : JSON.stringify({order:order, reviewTgt:reviewTgt, category:category}),
	   			contentType : "application/json",
				beforeSend : function(xhr)
               {
   				xhr.setRequestHeader(header, token);
               },
				success : function(data) {
					$('#newStar').empty();
					for(d of data){
						$('#newStar').append(newStarList(d));
					}
				},
				fail : function(result) {
					alert('í•„ìˆ˜í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”')
				}
			})
	   })
	   
	   function newStarList(data){
		   let star=``;
		   for(let i=0; i<data.fullstar; i++){
			  star += `<i class="fa fa-star star"></i>`;
		   }
		   
		   if(data.halfstar > 0){
			   for(let i=0; i<1; i++){
					  star += `<i class="fa fa-star-half-full star"></i>`;
				}
		   }
		   
		   if(data.laststar >= 1){
			   for(let i=0; i<data.laststar; i++){
					  star += `<i class="fa fa-star-o star"></i>`;
				}
		    }
		   
		   
		   let tag = `<div class="starList">
               <div class="comments reviews">
               <div class="comment clearfix">
               <div class="comment-avatar"><img src="/images/replyImg.png" alt="avatar"></div>
                 <div class="comment-content clearfix">
                   <div class="comment-author font-alt">
                   <!--ë³„ì ì²˜ë¦¬-->
                   		<span>${star}</span>
                   </div>
                   <div class="comment-body">
                     <p>${data.reviewCntn}</p>
                   </div>
                   <div class="comment-meta font-alt">
                   	<span>${data.userId}</span> - <span>${data.writingDt}</span>
                   		
                   </div>
                 </div>
               </div>
         	</div>
         </div>`
		  
        return tag;
	   }
   </script>
</div>
</html>