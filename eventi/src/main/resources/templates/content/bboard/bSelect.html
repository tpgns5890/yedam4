<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
   xmlns:th="http://www.thymeleaf.org"
   xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
   layout:decorate="~{layouts/default_layout}">

<head>
<style>
.heart {
  width: 100px;
  height: 100px;
  background: url("https://cssanimation.rocks/images/posts/steps/heart.png") no-repeat;
  background-position: 0 0;
  cursor: pointer;
  transition: background-position 1s steps(28);
  transition-duration: 0s;
  margin-left: -20px;
  }
  
  .active {
    transition-duration: 1s;
    background-position: -2800px 0;
  }
  
  #modal {
			display: none;
			position: fixed;
			top: 15em;
			left: 0;
			width: 100%;
			height: 100%;
			z-index: 1;
			width: 100%;
		}
		
		#modal label{
			font-size: 18px;
			display: inline-block;
	    	text-align: left;
	    	width: 80px;
		}
		
		#modal input{
			height: 40px;
			width: 130px;
			margin: 5px 0;
		}

		#modal h2 {
			margin: 0;
			text-align: center;
			color: #3a6351;
			font-weight: bold;
		}

		#modal button {
			display: inline-block;
			width: 100px;
			border: 0.2px solid black;
			border-radius: 5px;
		}

		#modal .modal_content {
			width: 350px;
			min-height: 200px;
			margin: 0 auto;
			padding: 20px;
			background: #fff;
			border: 0.5px solid #666;
			border-radius: 15px;
		}

		#modal .modal_layer {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0, 0, 0, 0.5);
			z-index: -1;
		}
		
		.blueBtn{
		background-color: #FFDE58;
		border: 1px solid #FFDE58;
		color: black;
		margin-top: 3px;
		margin-left: 5px;
		width: 100px;
		height: 50px;
		padding: 0;
		border-radius: 5px;
		font-weight: bold;
		font-size: 18px;
	}
	
	.blueBtn:hover {
		background-color: white;
		color: black;
		border: 1px solid #FFDE58;
		font-size: 18px;
	}
	
	.bageBtn{
		background-color: #FAF8F1;
		border: 1px solid #FAF8F1;
		color: black;
		margin-top: 3px;
		margin-left: 5px;
		width: 100px;
		height: 50px;
		padding: 0;
		border-radius: 5px;
		font-weight: bold;
		font-size: 18px;
	}
	
	.bageBtn:hover {
		background-color: white;
		color: black;
		border: 1px solid #FAEAB1;
		font-size: 18px;
	}
	
	#cntnSize{
		display: flex;
    	align-items: center;
	}
	
	p{
		margin-right: 5px; 
	}
	
	h4{
		font-weight: bold;
		margin-top: 50px;
	}
	
	#repInsertBtn, #logRepBtn{
		background-color: transparent;
		border: 1px solid rgba(2,126,251,1);
		color: rgba(2,126,251,1);
		float: right;
		margin-top: 3px;
		width: 60px;
		height: 32px;
		padding: 0;
	}
	
	.replyBtn{
		background-color: transparent;
		border: 0;
		color: rgba(2,126,251,1);
	}
	
	#contStyle{
		margin-top:50px; 
		margin-bottom:50px; 
		border:1px solid #c8c8c8; 
		min-height: 1000px;
		border-radius: 30px;
		box-shadow: 5px 5px 5px #00000078;
	}
</style>

<!-- csrf ì„¤ì • -->
<meta name="_csrf" th:content="${_csrf.token}"/>
<meta name="_csrf_header" th:content="${_csrf.headerName}"/>
</head>

<div layout:fragment="content" class="content">
		<section class="module bg-dark-60 gallery-page-header parallax-bg" data-background="/images/bboard.png" style="background-image: url(&quot;/images/bboard.png&quot;);">
          <div class="container">
            <div class="row">
              <div class="col-sm-6 col-sm-offset-3">
                <th:block th:if="${bSelect.type =='T04'}">
                	<h2 class="module-title font-alt" style="margin: 0;">ììœ ê²Œì‹œíŒ</h2>
                </th:block>
                <th:block th:if="${bSelect.type =='T05'}">
                	<h2 class="module-title font-alt" style="margin: 0;">ë©˜í† ë§ê²Œì‹œíŒ</h2>
                </th:block>
              </div>
            </div>
          </div>
        </section>
   
   <div class="container" id="contStyle">
   
   <input type="hidden" id="type" th:value=${bSelect.type}>
   <!-- í˜„ì¬ ë¡œê·¸ì¸ëœ idì™€ ì‘ì„±ìidê°€ ë™ì¼í•  ê²½ìš° ë²„íŠ¼ ë‚˜íƒ€ë‚¨ -->
   <div style="margin-top: 30px;">
	   <th:block th:if="${session.member.userId} == ${bSelect.writer}">
	   		<button type="button" class="blueBtn" th:onclick="|location.href='@{bUpdate(bBoardNo=${bSelect.bBoardNo})}'|">ê¸€ ìˆ˜ì •í•˜ê¸°</button>
	   		<button type="button" class="bageBtn delCheck">ê¸€ ì‚­ì œí•˜ê¸°</button>
	   </th:block>
	   
	   <th:block th:if="${session.member.userId} != ${bSelect.writer}">
	   <!-- ì‹ ê³ í•˜ê¸° -->
	   <button type="button" class="blueBtn" id="modalUp">ì‹ ê³ í•˜ê¸°</button>
	   </th:block>
   </div>
   <div id="cntnSize">
   <h2 th:text="${bSelect.ttl}"></h2>
   <!-- í•´ë‹¹ ê²Œì‹œê¸€ì— ì¢‹ì•„ìš”ë¥¼ ëˆŒë €ì„ ê²½ìš°ì—ëŠ” ì±„ì›Œì§„ í•˜íŠ¸ê°€ ë‚˜íƒ€ë‚¨ -->
   <th:block th:if="${like == null}">
   	<div class="stage">
  		<div class="stage heart"></div>
   	</div>
   </th:block>
   
   <th:block th:if="${like != null}">
   	<div class="stage">
  		<div class="stage heart active"></div>
   	</div>
   </th:block>
   </div>
   
   <div style="display: flex; justify-content: flex-end;">
   		<p th:if="${bSelect.ano} == 'N'" th:text="|ì‘ì„±ì ${bSelect.writer}| + ' | '"></p>
   		<p th:if="${bSelect.ano} == 'Y'" th:text="|ì‘ì„±ì ${bSelect.checkano}| + ' | '"></p>
   		<p th:text="|ì‘ì„±ì¼ì ${#dates.format(bSelect.dt, 'yyyy/MM/dd')}| + ' | '"></p>
   		<p th:text="|ğŸ‘“ì¡°íšŒìˆ˜ ${bSelect.inq}| + ' | '"></p> 
   		<p id="likeCount" th:text="|ğŸ˜ì¢‹ì•„ìš”ìˆ˜ ${bSelect.cnt}|"></p>
   </div>
   
   <hr>
   
   <div>
   		<div th:each="f : ${file}" style="margin-bottom: 50px;">
	       	<a th:hrewf="|/fileView/${f.sevNm}|" class="image-popup prod-img-bg">
	        <img th:src="|/fileView/${f.sevNm}|" class="img-fluid"></a>
    	</div>
   		<p th:utext=${bSelect.cntn}></p>	
   </div>
   
   <!-- ëŒ“ê¸€ í¼ -->
   <h4>ëŒ“ê¸€</h4>
     <div class="border">
       <!-- ëŒ“ê¸€ ì‘ì„± -->
    	<form id="replyInsertFrm">
    		<th:block sec:authorize="!isAuthenticated()">
    			<textarea class="form-control" name="replyCntn" id="replyCntn" rows="3" placeholder="ë¡œê·¸ì¸ í›„ ë“±ë¡ ê°€ëŠ¥í•©ë‹ˆë‹¤." readonly="readonly"></textarea>
    			<button type="button" id="logRepBtn">ëŒ“ê¸€ì¶”ê°€</button>
    		</th:block>
    
    		<th:block sec:authorize="isAuthenticated()">
    			<textarea class="form-control" name="replyCntn" id="replyCntn" rows="3" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”."></textarea>
    			<button type="button" id="repInsertBtn">ëŒ“ê¸€ì¶”ê°€</button>
    		</th:block>
    	</form>
    
    <div id=reply style="margin-top: 30px;">
			</div>
             </div>
    
    <!-- ì‹ ê³  ë“±ë¡ í¼ -->
    <div id="modal">
			<div class="modal_content">
				<h2>ì‹ ê³ </h2>
				<div id="box">
					<input type="hidden" id="targetId" name="targetId" th:value="${bSelect.bBoardNo}" readonly>
					<input type="hidden" id="userId" name="userId" th:value="${session.member.userId}">
					<label>ì‹ ê³ ì‚¬ìœ </label>
					<textarea rows="5" cols="40" id="banCntn" name="banCntn" placeholder="ì‹ ê³ ì‚¬ìœ ì— ëŒ€í•´ ì‘ì„±í•´ì£¼ì„¸ìš”."></textarea>
					<div style="text-align: center;">
					<button type="button" class="bageBtn" id="cancel">ì·¨ì†Œ</button>
					<button type="button" class="blueBtn" id="punish">ì‹ ê³ </button>
					</div>
				</div>
			</div>
		<div class="modal_layer"></div>
	</div>
   </div>
   <script>
   $(function() {
	    //csrf ì„¤ì •
	    var token = $("meta[name='_csrf']").attr("content");
		var header = $("meta[name='_csrf_header']").attr("content");
		
		let userId = '[[${session.member.userId}]]';
		let type = '[[${bSelect.type}]]';
		let bBoardNo = '[[${bSelect.bBoardNo}]]';
		
		//ëŒ“ê¸€ ë¶ˆëŸ¬ì˜¤ê¸°
		$.ajax({
   			url : '/replyList',
   			method : 'post',
   			data : JSON.stringify({boardCat:type, replyTgt:bBoardNo}),
   			contentType : "application/json",
   			beforeSend : function(xhr)
            {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
				xhr.setRequestHeader(header, token);
            }
   		}).then(res => {
   			for(reply of res){
   				//ëŒ“ê¸€ì¼ ê²½ìš°
   				if(reply.rerepTgt == null){
   					$("#reply").append(make(reply));
   				} else {
   					//ëŒ€ëŒ“ê¸€ì¼ ê²½ìš°, ëŒ€ëŒ“ê¸€ì˜ ê²½ìš° rerepTgtì»¬ëŸ¼ì— ëŒ€ëŒ“ê¸€ì„ ë‹¨ ëŒ“ê¸€ ë²ˆí˜¸ê°€ ì í˜€ìˆë‹¤.
   					//ëŒ€ëŒ“ê¸€ì€ ì—°ê´€ìˆëŠ” ëŒ“ê¸€ ë°”ë¡œ ë°‘ì— ë“¤ì–´ê°€ì•¼ë˜ê¸° ë•Œë¬¸ì— ëŒ“ê¸€ ìƒì„±ì‹œ idë¥¼ ë¶€ì—¬í•˜ì—¬ rerepTgtì´ ëŒ“ê¸€IDì™€ ê°™ì€ ë²ˆí˜¸ê°€ ì íŒ ëŒ“ê¸€ ë°‘ìœ¼ë¡œ appendí•œë‹¤.
   					$("#" + reply.rerepTgt).append(makeRe(reply));
   				}
   			}
   		})
		
   	//ëŒ“ê¸€ trìƒì„±
   		function make(reply){
			let delBtn = '';
			let upBtn = '';
			let replyBtn ='';
			let userId = '[[${session.member != null ? session.member.userId :''}]]';
			let writer = '[[${bSelect.writer}]]';
			
			if(writer == userId){
				replyBtn = `<button class="reply replyBtn">Reply</button>`;
			}
			
			//ëŒ“ê¸€ ì‘ì„±ìì¼ ê²½ìš°ì—ë§Œ ì‚­ì œ ë²„íŠ¼ ìƒì„±
			if(reply.userId ==userId){
				delBtn = `<button class='repDelete replyBtn'>ì‚­ì œ</button>`;
				upBtn = `<button class='repUpdate replyBtn'>ìˆ˜ì •</button>`;
			}
			
   			let p = `
   				<div class="comment clearfix">
                <div class="comment-avatar"><img src="/images/replyImg.png" alt="avatar"></div>
                <div id="${reply.replyNo}">
                <div class="comment-content clearfix">
                  <div class="comment-author font-alt">${reply.userId}</div>
                  <div class="comment-body">
                    <p style="font-size: 16px; font-weight: bold;">${reply.replyCntn}</p>
                  </div>
                  <div class="comment-meta font-alt">${reply.writingDt} ${replyBtn}${delBtn}${upBtn}
                  </div>
                </div>
                </div>
				</div>
			</div>
                `
   			return p;
   		}
   		
   		//ëŒ€ëŒ“ê¸€ trìƒì„±
   		function makeRe(reply){
   			let delBtn = '';
			let upBtn = '';
			let userId = '[[${session.member != null ? session.member.userId :''}]]';
			
			//ëŒ“ê¸€ ì‘ì„±ìì¼ ê²½ìš°ì—ë§Œ ì‚­ì œ ë²„íŠ¼ ìƒì„±
			if(reply.userId ==userId){
				delBtn = `<button class='repDelete replyBtn'>ì‚­ì œ</button>`;
				upBtn = `<button class='repUpdate replyBtn'>ìˆ˜ì •</button>`;
			}
   			
   			//í•œ ëŒ“ê¸€ë‹¹ ëŒ€ëŒ“ê¸€ì€ í•œê°œë§Œ ë‹¬ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ëŒ“ê¸€ì— ìˆëŠ” reply ë²„íŠ¼ ì‚­ì œ
   			$("#" + reply.rerepTgt).children().children().children('button:eq(0)').remove();
   			
   			let p = `<div class="comment clearfix">
                <div class="comment-avatar"><img src="/images/replyImg.png" alt="avatar"></div>
                <div id="${reply.replyNo}">
                <div class="comment-content clearfix">
                  <div class="comment-author font-alt">${reply.userId}</div>
                  <div class="comment-body">
                    <p style="font-size: 16px; font-weight: bold;">${reply.replyCntn}</p>
                  </div>
                  <div class="comment-meta font-alt" id="${reply.replyNo}">${reply.writingDt} ${delBtn}${upBtn}
                  </div>
                </div>
                </div>
              </div>`
            
            return p;
   		}

		//ëŒ“ê¸€ ì¶”ê°€
		$("#repInsertBtn").on("click", function() {
			//textareaì— ìˆëŠ” ê°’ ë“¤ê³  ì˜¤ê¸°
			let replyCntn = $('#replyCntn').val();
			
			$.ajax({
	   			url : '/replyInsert',
	   			method : 'post',
	   			data : JSON.stringify({userId:userId, replyTgt:bBoardNo, replyCntn:replyCntn, boardCat:type}),
	   			contentType : "application/json",
	   			beforeSend : function(xhr)
	            {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
					xhr.setRequestHeader(header, token);
	            }
	   		}).then(res => {
	   			//ëŒ“ê¸€ ë¶€ë¶„ì— ë“±ë¡í•˜ê¸°
	   			$("#reply").append(make(res));
	   			$('#replyCntn').val('');
	   		})
		});
		
		//replyë²„íŠ¼ì„ í´ë¦­í–ˆì„ ê²½ìš° ëŒ€ëŒ“ê¸€ ì…ë ¥ í¼ ìƒì„±
		$(document).on('click', '.reply', function(e){
		    e.preventDefault();
		    //ëŒ€ëŒ“ê¸€ì„ ì‘ì„±í•  replyNo êµ¬í•˜ê¸°
		    let rerepTgt = $(this).parent().parent().parent("div").attr('id');
		    //ëŒ€ëŒ“ê¸€ ì…ë ¥í•  ìˆ˜ ìˆëŠ” í¼ ìƒì„±
		  	$(this).parent("div").append(makeFrm(rerepTgt));
		  	
		  	//replyë²„íŠ¼ ìˆ¨ê¹€
		  	$(this).hide();
		})
		
		//ëŒ€ëŒ“ê¸€ ì…ë ¥ í¼
		function makeFrm(rerepTgt) {
			let form = `<form>
				<input type="hidden" id="rerepTgt" name="rerepTgt" value="${rerepTgt}">
	            <textarea class="form-control" id="reReplyCntn" name="replyCntn" rows="3"></textarea>
	            <button type="button" id="rerepTgt" class="reply">ë‹µë³€</button>
	        </form>`
		    
		    return form;
		}
		
		//ëŒ€ëŒ“ê¸€ ì¶”ê°€
		$(document).on('click', '#rerepTgt', function(e){
			let replyCntn = $('#reReplyCntn').val();
			let rerepTgt = $('#rerepTgt').val();
			
			$(this).parent("form").remove();
			$.ajax({
	   			url : '/replyInsert',
	   			method : 'post',
	   			data : JSON.stringify({userId:userId, replyTgt:bBoardNo, replyCntn:replyCntn, boardCat:type, rerepTgt:rerepTgt}),
	   			contentType : "application/json",
	   			beforeSend : function(xhr)
	            {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
					xhr.setRequestHeader(header, token);
	            }
	   		}).then(res => {
	   			
	   			$("#" + res.rerepTgt).append(makeRe(res));
	   		})
		})
		
		//ëŒ“ê¸€ ì‚­ì œ
		$(document).on('click', '.repDelete', function(e){
			let btn=$(this);
			let replyNo = $(this).parent("div").attr('id');
			$.ajax({
				url : '/replyDelete',
				type : 'POST',
				data : {
					replyNo : replyNo
				},
				beforeSend: function (xhr) {
					/*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
					xhr.setRequestHeader(header, token); //403ì˜¤ë¥˜, type postì¼ë•Œ ë„£ê¸°
				},
				success : function(result){
					if(result ==1){
					btn.closest(".comment").remove();
				}
			}
		});		
	});
		
		//ëŒ“ê¸€ ìˆ˜ì • í¼ìœ¼ë¡œ ë³€ê²½
		$(document).on('click', '.repUpdate', function(e){
			let replyNo = $(this).parent().parent().parent("div").attr('id');
			let p = $(this).parent().parent("div").children("div:eq(1)").children("p").text()
			$(this).parent().parent("div").children("div:eq(1)").children("p").replaceWith("<div><input type='hidden' id='replyNo' name='replyNo' value='" + replyNo +"'></input> <input type='text' id='upReplyCntn' name='upReplyCntn' value='" + p + "'></input>");
			
			$(this).toggleClass("updateBtn");
		});
		
		//ëŒ“ê¸€ ìˆ˜ì •
		$(document).on('click', '.updateBtn', function(e){
			$(this).toggleClass("updateBtn");
			let btn = $(this);
			let replyCntn = $('#upReplyCntn').val();
			let replyNo = $('#replyNo').val();
			let updateBtn = `<button class='repUpdate'>ìˆ˜ì •</button>`;
			
			$.ajax({
				url : '/replyUpdate',
				type : 'POST',
				data : JSON.stringify({replyNo : replyNo, replyCntn : replyCntn}),
				contentType : "application/json",
				beforeSend: function (xhr) {
					/*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
					xhr.setRequestHeader(header, token); //403ì˜¤ë¥˜, type postì¼ë•Œ ë„£ê¸°
				},
				success : function(result){
					btn.parent().parent("div").children("div:eq(1)").replaceWith("<p style='font-size: 16px; font-weight: bold;'>" + result.replyCntn + "</p>");
				}		
			})
		});
		
	   //ì¢‹ì•„ìš”ë¥¼ ëˆŒë €ì„ ê²½ìš°
	   $(".heart").on("click", function() {
		 //í´ë˜ìŠ¤ê°€ ì—†ì„ ê²½ìš° ìƒì„±, í´ë˜ìŠ¤ê°€ ìˆì„ ê²½ìš° ì‚­ì œ
	     $(this).toggleClass("active");
	     
	     //ì¢‹ì•„ìš”ë¥¼ ì¶”ê°€í–ˆì„ ê²½ìš°
	     if($(this).hasClass("active")){
	    	 //ì´ ì¢‹ì•„ìš”ìˆ˜ ì²˜ë¦¬
	    	 let likeCount = $('#likeCount').text();
	    	 $('#likeCount').text(parseInt(likeCount) + 1);
	    	 
	    	 //postë°©ì‹ìœ¼ë¡œ ì¢‹ì•„ìš” ë“±ë¡í•˜ê¸°
	    	 $.ajax({
					url : "/likes/lInsert",
					method : 'post',
					contentType : 'application/x-www-form-urlencoded',
					data : {userId:userId, targetNo:bBoardNo, category:type},
					beforeSend : function(xhr)
	                {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
	    				xhr.setRequestHeader(header, token);
	                },
					success : function(data) {
					},
					fail : function(result) {
						alert('í•„ìˆ˜í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”')
					}
				})
	     } else if (!$(this).hasClass("active")){ //ì¢‹ì•„ìš”ë¥¼ ì·¨ì†Œí–ˆì„ ê²½ìš°
	    	 //ì´ ì¢‹ì•„ìš”ìˆ˜ ì²˜ë¦¬
	    	 let likeCount = $('#likeCount').text();
	    	 $('#likeCount').text(parseInt(likeCount) - 1);
	    	 
	    	//postë°©ì‹ìœ¼ë¡œ ì¢‹ì•„ìš” ì·¨ì†Œí•˜ê¸°
	    	 $.ajax({
					url : "/likes/lDelete",
					method : 'post',
					contentType : 'application/x-www-form-urlencoded',
					data : {userId:userId, targetNo:bBoardNo, category:type},
					beforeSend : function(xhr)
	                {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
	    				xhr.setRequestHeader(header, token);
	                },
					success : function(data) {
						//alert('ì¢‹ì•„ìš” ì·¨ì†Œ ì™„ë£Œ');
					},
					fail : function(result) {
						alert('í•„ìˆ˜í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”')
					}
				})
	     }
	   });
	   
	   //ì‹ ê³ ë¶€ë¶„
	   //ì‹ ê³  ëª¨ë‹¬ì°½ ë„ìš°ê¸°
	   $('#modalUp').on('click', function() {
		   console.log('í´ë¦­');
		   $("#modal").show();
	   })
	   
	   //ëª¨ë‹¬ì°½ì—ì„œ ì·¨ì†Œë¥¼ ëˆŒë €ì„ ê²½ìš°
	   $("#cancel").on('click', function() {
			$("#modal").hide();
		});
	   
	   //ëª¨ë‹¬ì°½ì—ì„œ ì‹ ê³ ë¥¼ ëˆŒë €ì„ ê²½ìš°
	   $("#punish").on('click', function() {
		   let targetId = $("#targetId").val();
		   let banCntn = $("#banCntn").val();
		   let writer = "[[${bSelect.writer}]]";
		   let banType = 'P1';
		   console.log(userId, targetId, banCntn, type);
		   
		    $.ajax({
					url : "/punishInsert",
					method : 'post',
					contentType : 'application/x-www-form-urlencoded',
					data : {userId:userId, targetId:bBoardNo,banType:banType, banCntn:banCntn, targetCat:type, writer:writer},
					beforeSend : function(xhr)
	                {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
	    				xhr.setRequestHeader(header, token);
	                },
					success : function(data) {
						alert('ì‹ ê³ ë˜ì—ˆìŠµë‹ˆë‹¤.');
						$("#modal").hide();
					},
					fail : function(result) {
						alert('í•„ìˆ˜í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”')
					}
				})
	   })
	 });
   
   $(".delCheck").on('click', function(){
	   if(confirm('ì •ë§ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')){
		   let bBoardNo = '[[${bSelect.bBoardNo}]]';
		   let type = '[[${bSelect.type}]]'
		   location.href='/bboard/bDelete?bBoardNo=' + bBoardNo + '&type=' + type;
	   }
   })
   </script>
</div>
</html>